<h2>ðŸš— Vehicle Search</h2>

<form (ngSubmit)="executeSearch()">
  <div>
    <label for="brand">Brand:</label>
    <input id="brand" [(ngModel)]="search.brand" name="brand">
  </div>
  
  <div>
    <label for="model">Model:</label>
    <input id="model" [(ngModel)]="search.model" name="model">
  </div>

  <div>
    <label for="category">License Category (e.g., B):</label>
    <input id="category" [(ngModel)]="search.licenseCategory" name="licenseCategory">
  </div>

  <div>
    <label for="status">Status:</label>
    <select id="status" [(ngModel)]="search.status" name="status">
      <option value="">Any</option>
      <option value="AVAILABLE">Available</option>
      <option value="UNAVAILABLE">Unavailable</option>
      <option value="MAINTENANCE">Maintenance</option>
    </select>
  </div>

  <div>
    <label for="year">Year (min):</label>
    <input id="year" type="number" [(ngModel)]="search.year" name="year">
  </div>

  <button type="submit">Search</button>
  <button type="button" (click)="resetSearch()">Reset</button>
</form>

<div *ngIf="isLoading" class="loading-message">
  Loading vehicles...
</div>

<div *ngIf="error" class="error-message">
  Error: {{ error }}
</div>

<table *ngIf="!isLoading && vehicles.length > 0">
  <thead>
    <tr>
      <th>Reg. Number</th>
      <th>Brand</th>
      <th>Model</th>
      <th>Year</th>
      <th>Mileage (km)</th>
      <th>Category</th>
      <th>Price / day</th>
      <th>Status</th>
      <th>View History</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let vehicle of vehicles">
      <td>{{ vehicle.registrationNumber }}</td>
      <td><b>{{ vehicle.brand }}</b></td>
      <td>{{ vehicle.model }}</td>
      <td>{{ vehicle.year }}</td>
      <td>{{ vehicle.mileage | number }}</td>
      <td>{{ vehicle.licenseCategory }}</td>
      <td>{{ vehicle.pricePerDay | number:'1.2-2' }}</td>
      <td><span [class.available]="vehicle.status === 'AVAILABLE'">{{ vehicle.status }}</span></td>
      <td><a [routerLink]="['/vehicles', vehicle.id]">ðŸ“œ View History</a></td>
    </tr>
  </tbody>
</table>

<div *ngIf="!isLoading && vehicles.length === 0" class="no-data-message">
  No vehicles found in the system.
</div>
